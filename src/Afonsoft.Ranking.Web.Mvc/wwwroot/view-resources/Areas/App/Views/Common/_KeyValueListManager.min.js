var KeyValueListManager=function(e){return function(){let t,a,n,l,i=[];function o(e){i=i.filter(function(t){return t.key!==e}),u(),c(a.val())}function r(e){for(let t=0;t<i.length;t++)if(i[t].key===e)return{index:t,data:i[t]};return null}function s(){let e="";if(i&&i.length>0)for(var a=0;a<i.length;a++)e+=(n=i[a],l=a,`\n                <div class="alert alert-custom alert-white alert-bold m-1" id="${t.name}-item-${l}" data-index="${l}" role="alert">\n                   <div class="alert-text">"${n.key}" : "${n.value}"</div>\n                    <div class="alert-close">\n                       <button type="button" class="close editBtn">\n                           <span aria-hidden="true"><i class="la la-edit fa-1x"></i></span>\n                       </button>\n                       <button type="button" class="close closeBtn" data-dismiss="alert" aria-label="Close">\n                           <span aria-hidden="true"><i class="la la-close fa-1x"></i></span>\n                       </button>\n                   </div>                  \n                </div> \n            `);var n,l;return e}function u(){var a=s();e(`#${t.name}-list`).html(a)}function c(l){let i=r(l);!function(){var a=e(`#${t.name}-list .alert`);for(let t=0;t<a.length;t++)e(a[t]).removeClass("alert-warning").addClass("alert-white")}(),i?(a.val(i.data.key),n.val(i.data.value),e(`#${t.name}-add-btn`).html(app.localize("Edit")),e(`#${t.name}-item-${i.index}`).removeClass("alert-white").addClass("alert-warning")):e(`#${t.name}-add-btn`).html(app.localize("Add"))}return{init:function(d){t=d;for(let e=0;e<t.items.length;e++)i.push(t.items[e]);let p=function(){let e=app.localize("Key"),a=app.localize("Value");t.keyName&&(e=app.localize(t.keyName)),t.valueName&&(a=app.localize(t.valueName));let n=`\n                 <div class="form-group mb-2">\n                         <div class="input-group">\n                             <input type="text" class="form-control" id="${t.name}-key" placeholder="${e}">\n                             <input type="text" class="form-control" id="${t.name}-value" placeholder="${a}">\n                             <div class="input-group-append">\n                                 <button id="${t.name}-add-btn" class="btn btn-primary" type="button">${app.localize("Add")}</button>\n                             </div>\n                         </div>\n                </div>`;return n+=`<div class="key-value-items-list" id="${t.name}-list">`,n+=s(),n+="</div>"}();e("#"+d.containerId).append(p),a=e(`#${t.name}-key`),n=e(`#${t.name}-value`),l=e(`#${t.name}-add-btn`),function(){let s=`#${t.name}-list .alert-close .closeBtn`;e(document).on("click",s,function(){let t=e(this).closest(".alert"),a=t.attr("data-index"),n=i[a];null!==n&&o(n.key),u()});let d=`#${t.name}-list .alert-close .editBtn`;e(document).on("click",d,function(){let t=e(this).closest(".alert"),a=t.attr("data-index"),n=i[a];null!==n&&c(n.key)}),l.click(function(){!function(){let e=a.val(),t=n.val();e&&""!==e&&t&&""!==t?(r(e)&&o(e),i.push({key:e,value:t}),u(),a.val(""),n.val("")):abp.notify.error(app.localize("KeyAndValueCanNotBeNull"))}()}),a.change(function(){c(e(this).val())})}()},getValues:function(){return i}}}}(jQuery);