app.modals.CreateDynamicEntityPropertyModal=function(){var a,e=abp.services.app.dynamicEntityProperty;this.init=function(e){a=e},this.save=function(){var t={entityFullName:a.getModal().find("#edp-create-modal-entityFullName").val(),dynamicPropertyId:a.getModal().find("#edp-create-modal-dynamicPropertyId").val()};a.setBusy(!0),e.add(t).done(function(){abp.notify.info(app.localize("SavedSuccessfully")),a.close(),abp.event.trigger("app.createOrEditDynamicEntityPropertiesModalSaved")}).always(function(){a.setBusy(!1)})}};
$(function(){var e=$("#DynamicEntityPropertiesTable"),t=abp.services.app.dynamicEntityProperty,a=new app.ModalManager({viewUrl:abp.appPath+"App/DynamicEntityProperty/CreateModal",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/DynamicEntityProperties/_CreateModal.js",modalClass:"CreateDynamicEntityPropertyModal",cssClass:"scrollable-modal"}),n={delete:abp.auth.hasPermission("Pages.Administration.DynamicEntityProperties.Delete")};$("#CreateNewDynamicEntityProperty").click(function(){a.open({entityFullName:$("input[name=entity-full-name]").val()})}),$("#GetDynamicEntityPropertiesButton").click(function(e){e.preventDefault(),r()});var i=e.DataTable({paging:!1,serverSide:!1,processing:!1,listAction:{ajaxFunction:t.getAllPropertiesOfAnEntity,inputFilter:function(){return{entityFullName:$("input[name=entity-full-name]").val()}}},columnDefs:[{className:"control responsive",orderable:!1,render:function(){return""},targets:0},{targets:1,orderable:!1,data:"dynamicPropertyName"},{targets:2,data:null,orderable:!1,defaultContent:"",visible:n.delete,rowAction:{element:$("<button/>").addClass("btn btn-danger").text(app.localize("Delete")).click(function(){var e;e=$(this).data(),abp.message.confirm(app.localize("DeleteDynamicEntityPropertyMessage",e.entityFullName,e.dynamicPropertyName),app.localize("AreYouSure"),function(a){a&&(abp.ui.setBusy(),t.delete(e.id).done(function(){r(),abp.notify.success(app.localize("SuccessfullyDeleted"))}).always(function(){abp.ui.clearBusy()}))})})}}]});function r(){i.ajax.reload()}abp.event.on("app.createOrEditDynamicEntityPropertiesModalSaved",function(){r()})});