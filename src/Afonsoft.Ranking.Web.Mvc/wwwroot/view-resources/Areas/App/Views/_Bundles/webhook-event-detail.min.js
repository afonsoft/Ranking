function ShowResponseDetail(e){var t=$("#"+e).text(),o=$("#SendAttemptDetailModal");o.find(".modal-body").text(t),o.modal("show")}$(function(){var e=$("#WebhookEventDetailSendAttemptsTable"),t=abp.services.app.webhookSendAttempt,o={resend:abp.auth.hasPermission("Pages.Administration.Webhook.ResendWebhook")},n=e.DataTable({paging:!1,serverSide:!1,processing:!1,listAction:{ajaxFunction:t.getAllSendAttemptsOfWebhookEvent,inputFilter:function(){return{id:webhookEventId}}},columnDefs:[{className:"control responsive",orderable:!1,render:function(){return""},targets:0},{targets:1,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{text:'<i class="fa fa-cog"></i><span class="caret"></span>',items:[{text:app.localize("Resend"),visible:function(e){return o.resend},action:function(e){var o;o=e.record.id,abp.message.confirm(app.localize("WebhookEventWillBeSendWithSameParameters"),app.localize("AreYouSure"),function(e){e&&(abp.ui.setBusy(),t.resend(o).done(function(){abp.notify.success(app.localize("WebhookSendAttemptInQueue"))}).always(function(){abp.ui.clearBusy()}))})}},{text:app.localize("GoToSubscription"),action:function(e){window.location="/App/WebhookSubscription/Detail/ "+e.record.webhookSubscriptionId}}]}},{targets:2,orderable:!1,data:"webhookSubscriptionId"},{targets:3,orderable:!1,data:"webhookUri"},{targets:4,orderable:!1,data:"creationTime",render:function(e){return moment(e)}},{targets:5,orderable:!1,data:"responseStatusCode"},{targets:6,orderable:!1,data:"response",render:function(e){return function(e,t,o){if("string"!=typeof e)return e;if(e.length<=t)return e;var n="detail-"+parseInt(1e7*Math.random())+parseInt(1e7*Math.random());return`<button class="btn btn-outline-primary btn-sm" onclick="ShowResponseDetail('${n}')" >${o}</button>\n                     <div class="d-none" id= ${n}>${e}</div>`}(e,100,app.localize("ShowResponse"))}}]});$("#refresh-send-attempts-btn").click(function(e){n.ajax.reload()}),$("#dataShowMoreBtn").click(function(e){$("#dataDots").remove(),$("#dataMore").removeClass("d-none"),$(this).remove()})});