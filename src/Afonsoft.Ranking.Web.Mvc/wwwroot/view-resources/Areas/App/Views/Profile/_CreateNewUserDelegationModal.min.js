app.modals.CreateNewUserDelegationModal=function(){var e,a=abp.services.app.userDelegation,t=null,i=null;this.init=function(a){i=(e=a).getModal(),(t=i.find("form[name=DelegateUserModalForm]")).validate();var n=i.find("#StartTime"),o=i.find("#EndTime");n.datetimepicker({locale:abp.localization.currentLanguage.name,format:"L"}).on("dp.change",function(e){o.data("DateTimePicker").minDate(e.date)}),o.datetimepicker({locale:abp.localization.currentLanguage.name,format:"L"}).on("dp.change",function(e){n.data("DateTimePicker").maxDate(e.date)}),i.find("#UsernameOrEmailAddress").closest(".input-group").click(function(){app.modals.LookupModal.create({title:app.localize("SelectAUser"),serviceMethod:abp.services.app.commonLookup.findUsers,filterText:"",excludeCurrentUser:!0}).open({},function(e){var a=e.value;$("#TargetUserId").val(a),$("#UsernameOrEmailAddress").val(e.name)})})},this.save=function(){if(t.valid()){var i=t.serializeFormToObject();e.setBusy(!0),a.delegateNewUser(i).done(function(a){abp.notify.info(app.localize("SavedSuccessfully")),e.setResult(a),e.close()}).always(function(){e.setBusy(!1)})}}};