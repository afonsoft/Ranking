app.modals.ManageDynamicPropertyValueModal=function(){var e,a,t,n=$("#DynamicPropertyValuesTable"),i=abp.services.app.dynamicProperty,l=abp.services.app.dynamicPropertyValue,o=!1,d={edit:abp.auth.hasPermission("Pages.Administration.DynamicPropertyValue.Edit"),delete:abp.auth.hasPermission("Pages.Administration.DynamicPropertyValue.Delete")};function r(){t=n.DataTable({paging:!1,serverSide:!0,processing:!1,listAction:{ajaxFunction:l.getAllValuesOfDynamicProperty,inputFilter:function(){return{id:e.getModal().find("input[name=dynamicPropertyId]").val()}}},columnDefs:[{targets:0,orderable:!1,data:"value"},{targets:1,data:null,orderable:!1,defaultContent:"",visible:d.edit,rowAction:{element:$("<button/>").addClass("btn btn-primary").text(app.localize("Edit")).click(function(){u($(this).data().id,$(this).data().value)})}},{targets:2,data:null,orderable:!1,defaultContent:"",visible:d.delete,rowAction:{element:$("<button/>").addClass("btn btn-danger").text(app.localize("Delete")).click(function(){var e;e=$(this).data().id,abp.message.confirm(app.localize("DeleteDynamicPropertyValueMessage"),app.localize("AreYouSure"),function(a){a&&(abp.ui.setBusy(),l.delete(e).done(function(){p(),abp.notify.success(app.localize("SuccessfullyDeleted"))}).always(function(){abp.ui.clearBusy()}))})})}}]})}function p(){o&&t&&t.ajax.reload()}function u(a,t){a?e.getModal().find("input[name=id]").val(a):e.getModal().find("input[name=id]").val(0),e.getModal().find("input[name=dynamicPropertyValue]").val(t),e.getModal().find("#edit-values-area").show("fast")}$("#add-new-dynamic-property-value").click(function(){u()}),abp.event.on("app.createOrDynamicEditPropertyValueModalSaved",function(){p()}),$("#refresh-dynamic-property-values-btn").click(function(e){p()}),this.init=function(t){var n;n=(e=t).getModal().find("input[name=inputType]").val(),i.findAllowedInputType(n).done(function(e){(a=abp.inputTypeProviders.getInputTypeInstance({inputType:e}))?"boolean"==typeof a.hasValues?(a.hasValues?($("#portlet-dynamic-property-values").removeClass("d-none"),r()):$("#portlet-dynamic-property-values").hide(),o=!0):abp.notify.error(`Input type manager ${a} must have "hasValues" field typed boolean`):abp.notify.error("Unknown input type")})},$("#save-value").click(function(){var a={id:e.getModal().find("input[name=id]").val(),dynamicPropertyId:e.getModal().find("input[name=dynamicPropertyId]").val(),value:e.getModal().find("input[name=dynamicPropertyValue]").val()};e.setBusy(!0),a.id&&a.id>0?l.update(a).done(function(){abp.notify.info(app.localize("SavedSuccessfully")),p()}).always(function(){e.getModal().find("#edit-values-area").hide("fast"),e.setBusy(!1)}):l.add(a).done(function(){abp.notify.info(app.localize("SavedSuccessfully")),p()}).always(function(){e.getModal().find("#edit-values-area").hide("fast"),e.setBusy(!1)})})};