"use strict";!function(a){var t="KTDatatable",e=KTUtil,l=KTApp;if(void 0===e)throw new Error("Util class is required and must be included before KTDatatable");a.fn.KTDatatable=function(o){if(0!==a(this).length){var n=this;n.debug=!1,n.API={record:null,value:null,params:null};var i={isInit:!1,cellOffset:110,iconOffset:15,stateId:"meta",ajaxParams:{},pagingObject:{},init:function(t){var e,l=!1;null===t.data.source&&(i.extractTable(),l=!0),i.setupBaseDOM.call(),i.setupDOM(n.table),a(n).on("datatable-on-layout-updated",i.afterRender),n.debug&&i.stateRemove(i.stateId),i.setDataSourceQuery(i.getOption("data.source.read.params.query")),a.each(i.getOption("extensions"),function(t,e){"function"==typeof a.fn.KTDatatable[t]&&("object"!=typeof e&&(e=a.extend({},e)),new a.fn.KTDatatable[t](n,e))}),i.spinnerCallback(!0),"remote"!==t.data.type&&"local"!==t.data.type||(!1===t.data.saveState&&i.stateRemove(i.stateId),"local"===t.data.type&&"object"==typeof t.data.source&&(n.dataSet=n.originalDataSet=i.dataMapCallback(t.data.source)),i.dataRender()),l&&(a(n.tableHead).find("tr").remove(),a(n.tableFoot).find("tr").remove()),i.setHeadTitle(),i.getOption("layout.footer")&&i.setHeadTitle(n.tableFoot),void 0!==t.layout.header&&!1===t.layout.header&&a(n.table).find("thead").remove(),void 0!==t.layout.footer&&!1===t.layout.footer&&a(n.table).find("tfoot").remove(),null!==t.data.type&&"local"!==t.data.type||(i.setupCellField.call(),i.setupTemplateCell.call(),i.setupSubDatatable.call(),i.setupSystemColumn.call(),i.redraw());var o=!1;a(window).resize(function(){a(this).width()!==e&&(e=a(this).width(),i.fullRender()),o||(e=a(this).width(),o=!0)}),a(n).height("");var d="";return a(i.getOption("search.input")).on("keyup",function(t){if(!i.getOption("search.onEnter")||13===t.which){var e=a(this).val();d!==e&&(i.search(e),d=e)}}),n},extractTable:function(){var t=[],l=a(n).find("tr:first-child th").get().map(function(e,l){var n=a(e).data("field"),i=a(e).data("title");void 0===n&&(n=a(e).text().trim()),void 0===i&&(i=a(e).text().trim());var d={field:n,title:i};for(var r in o.columns)o.columns[r].field===n&&(d=a.extend(!0,{},o.columns[r],d));return t.push(d),n});o.columns=t;var i=[],d=[];a(n).find("tr").each(function(){a(this).find("td").length&&i.push(a(this).prop("attributes"));var t={};a(this).find("td").each(function(a,e){t[l[a]]=e.innerHTML.trim()}),e.isEmpty(t)||d.push(t)}),o.data.attr.rowProps=i,o.data.source=d},layoutUpdate:function(){i.setupSubDatatable.call(),i.setupSystemColumn.call(),i.setupHover.call(),void 0===o.detail&&1===i.getDepth()&&i.lockTable.call(),i.resetScroll(),i.isLocked()||(i.redraw.call(),i.isSubtable()||!0!==i.getOption("rows.autoHide")||i.autoHide(),a(n.table).find(".datatable-row").css("height","")),i.columnHide.call(),i.rowEvenOdd.call(),i.sorting.call(),i.scrollbar.call(),i.isInit||(i.dropdownFix(),a(n).trigger("datatable-on-init",{table:a(n.wrap).attr("id"),options:o}),i.isInit=!0),a(n).trigger("datatable-on-layout-updated",{table:a(n.wrap).attr("id")})},dropdownFix:function(){var t;a("body").on("show.bs.dropdown",".datatable .datatable-body",function(e){t=a(e.target).find(".dropdown-menu"),a("body").append(t.detach()),t.css("display","block"),t.position({my:"right top",at:"right bottom",of:a(e.relatedTarget)}),n.closest(".modal").length&&t.css("z-index","2000")}).on("hide.bs.dropdown",".datatable .datatable-body",function(e){a(e.target).append(t.detach()),t.hide()}),a(window).on("resize",function(a){void 0!==t&&t.hide()})},lockTable:function(){var t={lockEnabled:!1,init:function(){t.lockEnabled=i.lockEnabledColumns(),0===t.lockEnabled.left.length&&0===t.lockEnabled.right.length||t.enable()},enable:function(){a(n.table).find("thead,tbody,tfoot").each(function(){var e=this;0===a(this).find(".datatable-lock").length&&a(this).ready(function(){!function(e){if(a(e).find(".datatable-lock").length>0)i.log("Locked container already exist in: ",e);else if(0!==a(e).find(".datatable-row").length){var l=a("<div/>").addClass("datatable-lock datatable-lock-left"),o=a("<div/>").addClass("datatable-lock datatable-lock-scroll"),d=a("<div/>").addClass("datatable-lock datatable-lock-right");a(e).find(".datatable-row").each(function(){var t=a("<tr/>").addClass("datatable-row").data("obj",a(this).data("obj")).appendTo(l),e=a("<tr/>").addClass("datatable-row").data("obj",a(this).data("obj")).appendTo(o),n=a("<tr/>").addClass("datatable-row").data("obj",a(this).data("obj")).appendTo(d);a(this).find(".datatable-cell").each(function(){var l=a(this).data("locked");void 0!==l?(void 0===l.left&&!0!==l||a(this).appendTo(t),void 0!==l.right&&a(this).appendTo(n)):a(this).appendTo(e)}),a(this).remove()}),t.lockEnabled.left.length>0&&(a(n.wrap).addClass("datatable-lock"),a(l).appendTo(e)),(t.lockEnabled.left.length>0||t.lockEnabled.right.length>0)&&a(o).appendTo(e),t.lockEnabled.right.length>0&&(a(n.wrap).addClass("datatable-lock"),a(d).appendTo(e))}else i.log("No row exist in: ",e)}(e)})})}};return t.init(),t},fullRender:function(){a(n.tableHead).empty(),i.setHeadTitle(),i.getOption("layout.footer")&&(a(n.tableFoot).empty(),i.setHeadTitle(n.tableFoot)),i.spinnerCallback(!0),a(n.wrap).removeClass("datatable-loaded"),i.insertData()},lockEnabledColumns:function(){var t=a(window).width(),l=o.columns,n={left:[],right:[]};return a.each(l,function(a,l){void 0!==l.locked&&(void 0!==l.locked.left&&e.getBreakpoint(l.locked.left)<=t&&n.left.push(l.locked.left),void 0!==l.locked.right&&e.getBreakpoint(l.locked.right)<=t&&n.right.push(l.locked.right))}),n},afterRender:function(t,e){a(n).ready(function(){i.isLocked()&&i.redraw(),a(n.tableBody).css("visibility",""),a(n.wrap).addClass("datatable-loaded"),i.spinnerCallback(!1)})},hoverTimer:0,isScrolling:!1,setupHover:function(){a(window).scroll(function(a){clearTimeout(i.hoverTimer),i.isScrolling=!0}),a(n.tableBody).find(".datatable-cell").off("mouseenter","mouseleave").on("mouseenter",function(){if(i.hoverTimer=setTimeout(function(){i.isScrolling=!1},200),!i.isScrolling){var t=a(this).closest(".datatable-row").addClass("datatable-row-hover"),e=a(t).index()+1;a(t).closest(".datatable-lock").parent().find(".datatable-row:nth-child("+e+")").addClass("datatable-row-hover")}}).on("mouseleave",function(){var t=a(this).closest(".datatable-row").removeClass("datatable-row-hover"),e=a(t).index()+1;a(t).closest(".datatable-lock").parent().find(".datatable-row:nth-child("+e+")").removeClass("datatable-row-hover")})},adjustLockContainer:function(){if(!i.isLocked())return 0;var t=a(n.tableHead).width(),e=a(n.tableHead).find(".datatable-lock-left").width(),l=a(n.tableHead).find(".datatable-lock-right").width();void 0===e&&(e=0),void 0===l&&(l=0);var o=Math.floor(t-e-l);return a(n.table).find(".datatable-lock-scroll").css("width",o),o},dragResize:function(){var t,e,l=!1,o=void 0;a(n.tableHead).find(".datatable-cell").mousedown(function(n){o=a(this),l=!0,t=n.pageX,e=a(this).width(),a(o).addClass("datatable-cell-resizing")}).mousemove(function(i){if(l){var d=a(o).index(),r=a(n.tableBody),s=a(o).closest(".datatable-lock");if(s){var c=a(s).index();r=a(n.tableBody).find(".datatable-lock").eq(c)}a(r).find(".datatable-row").each(function(l,o){a(o).find(".datatable-cell").eq(d).width(e+(i.pageX-t)).children().width(e+(i.pageX-t))}),a(o).children().css("width",e+(i.pageX-t))}}).mouseup(function(){a(o).removeClass("datatable-cell-resizing"),l=!1}),a(document).mouseup(function(){a(o).removeClass("datatable-cell-resizing"),l=!1})},initHeight:function(){if(o.layout.height&&o.layout.scroll){var t=a(n.tableHead).find(".datatable-row").outerHeight(),e=a(n.tableFoot).find(".datatable-row").outerHeight(),l=o.layout.height;t>0&&(l-=t),e>0&&(l-=e),l-=2,a(n.tableBody).css("max-height",Math.floor(parseFloat(l)))}},setupBaseDOM:function(){n.initialDatatable=a(n).clone(),"TABLE"===a(n).prop("tagName")?(n.table=a(n).removeClass("datatable").addClass("datatable-table"),0===a(n.table).parents(".datatable").length&&(n.table.wrap(a("<div/>").addClass("datatable").addClass("datatable-"+o.layout.theme)),n.wrap=a(n.table).parent())):(n.wrap=a(n).addClass("datatable").addClass("datatable-"+o.layout.theme),n.table=a("<table/>").addClass("datatable-table").appendTo(n)),void 0!==o.layout.class&&a(n.wrap).addClass(o.layout.class),a(n.table).removeClass("datatable-destroyed").css("display","block"),void 0===a(n).attr("id")&&(i.setOption("data.saveState",!1),a(n.table).attr("id",e.getUniqueID("datatable-"))),i.getOption("layout.minHeight")&&a(n.table).css("min-height",i.getOption("layout.minHeight")),i.getOption("layout.height")&&a(n.table).css("max-height",i.getOption("layout.height")),null===o.data.type&&a(n.table).css("width","").css("display",""),n.tableHead=a(n.table).find("thead"),0===a(n.tableHead).length&&(n.tableHead=a("<thead/>").prependTo(n.table)),n.tableBody=a(n.table).find("tbody"),0===a(n.tableBody).length&&(n.tableBody=a("<tbody/>").appendTo(n.table)),void 0!==o.layout.footer&&o.layout.footer&&(n.tableFoot=a(n.table).find("tfoot"),0===a(n.tableFoot).length&&(n.tableFoot=a("<tfoot/>").appendTo(n.table)))},setupCellField:function(t){void 0===t&&(t=a(n.table).children());var e=o.columns;a.each(t,function(t,l){a(l).find(".datatable-row").each(function(t,l){a(l).find(".datatable-cell").each(function(t,l){void 0!==e[t]&&a(l).data(e[t])})})})},setupTemplateCell:function(t){void 0===t&&(t=n.tableBody);var e=o.columns;a(t).find(".datatable-row").each(function(t,l){var o=a(l).data("obj");if(void 0!==o){var d=i.getOption("rows.callback");"function"==typeof d&&d(a(l),o,t);var r=i.getOption("rows.beforeTemplate");"function"==typeof r&&r(a(l),o,t),void 0===o&&(o={},a(l).find(".datatable-cell").each(function(t,l){var n=a.grep(e,function(t,e){return a(l).data("field")===t.field})[0];void 0!==n&&(o[n.field]=a(l).text())})),a(l).find(".datatable-cell").each(function(l,d){var r=a.grep(e,function(t,e){return a(d).data("field")===t.field})[0];if(void 0!==r&&void 0!==r.template){var s="";"string"==typeof r.template&&(s=i.dataPlaceholder(r.template,o)),"function"==typeof r.template&&(s=r.template(o,t,n)),"undefined"!=typeof DOMPurify&&(s=DOMPurify.sanitize(s));var c=document.createElement("span");c.innerHTML=s,a(d).html(c),void 0!==r.overflow&&(a(c).css("overflow",r.overflow),a(c).css("position","relative"))}});var s=i.getOption("rows.afterTemplate");"function"==typeof s&&s(a(l),o,t)}})},setupSystemColumn:function(){if(n.dataSet=n.dataSet||[],0!==n.dataSet.length){var t=o.columns;a(n.tableBody).find(".datatable-row").each(function(e,l){a(l).find(".datatable-cell").each(function(e,l){var o=a.grep(t,function(t,e){return a(l).data("field")===t.field})[0];if(void 0!==o){var n=a(l).text();if(void 0!==o.selector&&!1!==o.selector){if(a(l).find('.checkbox [type="checkbox"]').length>0)return;a(l).addClass("datatable-cell-check");var d=a("<label/>").addClass("checkbox checkbox-single").append(a("<input/>").attr("type","checkbox").attr("value",n).on("click",function(){a(this).is(":checked")?i.setActive(this):i.setInactive(this)})).append("&nbsp;<span></span>");void 0!==o.selector.class&&a(d).addClass(o.selector.class),a(l).children().html(d)}if(void 0!==o.subtable&&o.subtable){if(a(l).find(".datatable-toggle-subtable").length>0)return;a(l).children().html(a("<a/>").addClass("datatable-toggle-subtable").attr("href","#").attr("data-value",n).append(a("<i/>").addClass(i.getOption("layout.icons.rowDetail.collapse"))))}}})});var e=function(e){var l=a.grep(t,function(a,t){return void 0!==a.selector&&!1!==a.selector})[0];if(void 0!==l&&void 0!==l.selector&&!1!==l.selector){var o=a(e).find('[data-field="'+l.field+'"]');if(a(o).find('.checkbox [type="checkbox"]').length>0)return;a(o).addClass("datatable-cell-check");var n=a("<label/>").addClass("checkbox checkbox-single checkbox-all").append(a("<input/>").attr("type","checkbox").on("click",function(){a(this).is(":checked")?i.setActiveAll(!0):i.setActiveAll(!1)})).append("&nbsp;<span></span>");void 0!==l.selector.class&&a(n).addClass(l.selector.class),a(o).children().html(n)}};o.layout.header&&e(a(n.tableHead).find(".datatable-row").first()),o.layout.footer&&e(a(n.tableFoot).find(".datatable-row").first())}},maxWidthList:{},adjustCellsWidth:function(){var t=a(n.tableBody).innerWidth()-i.iconOffset,e=a(n.tableBody).find(".datatable-row:first-child").find(".datatable-cell").not(".datatable-toggle-detail").not(":hidden").length;if(e>0){t-=i.iconOffset*e;var l=Math.floor(t/e);l<=i.cellOffset&&(l=i.cellOffset),a(n.table).find(".datatable-row").find(".datatable-cell").not(".datatable-toggle-detail").not(":hidden").each(function(t,e){var o=l,d=a(e).data("width");if(void 0!==d)if("auto"===d){var r=a(e).data("field");if(i.maxWidthList[r])o=i.maxWidthList[r];else{var s=a(n.table).find('.datatable-cell[data-field="'+r+'"]');o=i.maxWidthList[r]=Math.max.apply(null,a(s).map(function(){return a(this).outerWidth()}).get())}}else o=d;a(e).children().css("width",Math.ceil(o))})}return n},adjustCellsHeight:function(){a.each(a(n.table).children(),function(t,e){for(var l=a(e).find(".datatable-row").first().parent().find(".datatable-row").length,o=1;o<=l;o++){var n=a(e).find(".datatable-row:nth-child("+o+")");if(a(n).length>0){var i=Math.max.apply(null,a(n).map(function(){return a(this).outerHeight()}).get());a(n).css("height",Math.ceil(i))}}})},setupDOM:function(t){a(t).find("> thead").addClass("datatable-head"),a(t).find("> tbody").addClass("datatable-body"),a(t).find("> tfoot").addClass("datatable-foot"),a(t).find("tr").addClass("datatable-row"),a(t).find("tr > th, tr > td").addClass("datatable-cell"),a(t).find("tr > th, tr > td").each(function(t,e){0===a(e).find("span").length&&a(e).wrapInner(a("<span/>").css("width",i.cellOffset))})},scrollbar:function(){var t={scrollable:null,tableLocked:null,initPosition:null,init:function(){var l=e.getViewPort().width;if(o.layout.scroll){a(n.wrap).addClass("datatable-scroll");var d=a(n.tableBody).find(".datatable-lock-scroll");a(d).find(".datatable-row").length>0&&a(d).length>0?(t.scrollHead=a(n.tableHead).find("> .datatable-lock-scroll > .datatable-row"),t.scrollFoot=a(n.tableFoot).find("> .datatable-lock-scroll > .datatable-row"),t.tableLocked=a(n.tableBody).find(".datatable-lock:not(.datatable-lock-scroll)"),i.getOption("layout.customScrollbar")&&10!=e.detectIE()&&l>e.getBreakpoint("lg")?t.initCustomScrollbar(d[0]):t.initDefaultScrollbar(d)):a(n.tableBody).find(".datatable-row").length>0&&(t.scrollHead=a(n.tableHead).find("> .datatable-row"),t.scrollFoot=a(n.tableFoot).find("> .datatable-row"),i.getOption("layout.customScrollbar")&&10!=e.detectIE()&&l>e.getBreakpoint("lg")?t.initCustomScrollbar(n.tableBody):t.initDefaultScrollbar(n.tableBody))}},initDefaultScrollbar:function(e){t.initPosition=a(e).scrollLeft(),a(e).css("overflow-y","auto").off().on("scroll",t.onScrolling),a(e).css("overflow-x","auto")},onScrolling:function(l){var o=a(this).scrollLeft(),n=a(this).scrollTop();e.isRTL()&&(o-=t.initPosition),a(t.scrollHead).css("left",-o),a(t.scrollFoot).css("left",-o),a(t.tableLocked).each(function(t,e){i.isLocked()&&(n-=1),a(e).css("top",-n)})},initCustomScrollbar:function(e){t.scrollable=e,i.initScrollbar(e),t.initPosition=a(e).scrollLeft(),a(e).off().on("scroll",t.onScrolling)}};return t.init(),t},initScrollbar:function(t,l){if(t&&t.nodeName){a(n.tableBody).css("overflow","");var o=a(t).data("ps");e.hasClass(t,"ps")&&void 0!==o?o.update():(o=new PerfectScrollbar(t,Object.assign({},{wheelSpeed:.5,swipeEasing:!0,minScrollbarLength:40,maxScrollbarLength:300,suppressScrollX:i.getOption("rows.autoHide")&&!i.isLocked()},l)),a(t).data("ps",o)),a(window).resize(function(){o.update()})}},setHeadTitle:function(t){void 0===t&&(t=n.tableHead),t=a(t)[0];var l=o.columns,d=t.getElementsByTagName("tr")[0],r=t.getElementsByTagName("td");void 0===d&&(d=document.createElement("tr"),t.appendChild(d)),a.each(l,function(t,l){var o=r[t];if(void 0===o&&(o=document.createElement("th"),d.appendChild(o)),void 0!==l.title&&(o.innerHTML=l.title,o.setAttribute("data-field",l.field),e.addClass(o,l.class),void 0!==l.autoHide&&(!0!==l.autoHide?o.setAttribute("data-autohide-disabled",l.autoHide):o.setAttribute("data-autohide-enabled",l.autoHide)),a(o).data(l)),void 0!==l.attr&&a.each(l.attr,function(a,t){o.setAttribute(a,t)}),void 0!==l.textAlign){var i=void 0!==n.textAlign[l.textAlign]?n.textAlign[l.textAlign]:"";e.addClass(o,i)}}),i.setupDOM(t)},dataRender:function(t){a(n.table).siblings(".datatable-pager").removeClass("datatable-paging-loaded");var e=function(){n.dataSet=n.dataSet||[],i.localDataUpdate();var t=i.getDataSourceParam("pagination");0===t.perpage&&(t.perpage=o.data.pageSize||10),t.total=n.dataSet.length;var e=Math.max(t.perpage*(t.page-1),0),l=Math.min(e+t.perpage,t.total);return n.dataSet=a(n.dataSet).slice(e,l),t},l=function(t){var l=function(t,e){a(t.pager).hasClass("datatable-paging-loaded")||(a(t.pager).remove(),t.init(e)),a(t.pager).off().on("datatable-on-goto-page",function(l){a(t.pager).remove(),t.init(e)});var l=Math.max(e.perpage*(e.page-1),0),o=Math.min(l+e.perpage,e.total);i.localDataUpdate(),n.dataSet=a(n.dataSet).slice(l,o),i.insertData()};if(a(n.wrap).removeClass("datatable-error"),o.pagination)if(o.data.serverPaging&&"local"!==o.data.type){var d=i.getObject("meta",t||null);i.pagingObject=null!==d?i.paging(d):i.paging(e(),l)}else i.pagingObject=i.paging(e(),l);else i.localDataUpdate();i.insertData()};"local"===o.data.type||!1===o.data.serverSorting&&"sort"===t||!1===o.data.serverFiltering&&"search"===t?setTimeout(function(){l(),i.setAutoColumns()}):i.getData().done(l)},insertData:function(){n.dataSet=n.dataSet||[];var t=i.getDataSourceParam(),l=t.pagination,d=(Math.max(l.page,1)-1)*l.perpage,r=Math.min(l.page,l.pages)*l.perpage,s={};void 0!==o.data.attr.rowProps&&o.data.attr.rowProps.length&&(s=o.data.attr.rowProps.slice(d,r));var c=document.createElement("tbody");c.style.visibility="hidden";var p=o.columns.length;if(a.each(n.dataSet,function(l,d){var r=document.createElement("tr");r.setAttribute("data-row",l),a(r).data("obj",d),void 0!==s[l]&&a.each(s[l],function(){r.setAttribute(this.name,this.value)});for(var u=0;u<p;u+=1){var b=o.columns[u],g=[];if(i.getObject("sort.field",t)===b.field&&g.push("datatable-cell-sorted"),void 0!==b.textAlign){var f=void 0!==n.textAlign[b.textAlign]?n.textAlign[b.textAlign]:"";g.push(f)}void 0!==b.class&&g.push(b.class);var h=document.createElement("td");e.addClass(h,g.join(" ")),h.setAttribute("data-field",b.field),void 0!==b.autoHide&&(!0!==b.autoHide?h.setAttribute("data-autohide-disabled",b.autoHide):h.setAttribute("data-autohide-enabled",b.autoHide)),h.innerHTML=i.getObject(b.field,d),h.setAttribute("aria-label",i.getObject(b.field,d)),r.appendChild(h)}c.appendChild(r)}),0===n.dataSet.length){var u=document.createElement("span");e.addClass(u,"datatable-error"),u.innerHTML=i.getOption("translate.records.noRecords"),c.appendChild(u),a(n.wrap).addClass("datatable-error datatable-loaded"),i.spinnerCallback(!1)}a(n.tableBody).replaceWith(c),n.tableBody=c,i.setupDOM(n.table),i.setupCellField([n.tableBody]),i.setupTemplateCell(n.tableBody),i.layoutUpdate()},updateTableComponents:function(){n.tableHead=a(n.table).children("thead").get(0),n.tableBody=a(n.table).children("tbody").get(0),n.tableFoot=a(n.table).children("tfoot").get(0)},getData:function(){var t={dataType:"json",method:"POST",data:{},timeout:i.getOption("data.source.read.timeout")||3e4};if("local"===o.data.type&&(t.url=o.data.source),"remote"===o.data.type){var e=i.getDataSourceParam();i.getOption("data.serverPaging")||delete e.pagination,i.getOption("data.serverSorting")||delete e.sort,t.data=a.extend({},t.data,i.getOption("data.source.read.params"),e),"string"!=typeof(t=a.extend({},t,i.getOption("data.source.read"))).url&&(t.url=i.getOption("data.source.read")),"string"!=typeof t.url&&(t.url=i.getOption("data.source"))}return a.ajax(t).done(function(t,e,l){n.lastResponse=t,n.dataSet=n.originalDataSet=i.dataMapCallback(t),i.setAutoColumns(),a(n).trigger("datatable-on-ajax-done",[n.dataSet])}).fail(function(t,e,l){a(n).trigger("datatable-on-ajax-fail",[t]),a(n.tableBody).html(a("<span/>").addClass("datatable-error").html(i.getOption("translate.records.noRecords"))),a(n.wrap).addClass("datatable-error datatable-loaded"),i.spinnerCallback(!1)}).always(function(){})},paging:function(t,l){var o={meta:null,pager:null,paginateEvent:null,pagerLayout:{pagination:null,info:null},callback:null,init:function(t){o.meta=t,o.meta.page=parseInt(o.meta.page),o.meta.pages=parseInt(o.meta.pages),o.meta.perpage=parseInt(o.meta.perpage),o.meta.total=parseInt(o.meta.total),o.meta.pages=Math.max(Math.ceil(o.meta.total/o.meta.perpage),1),o.meta.page>o.meta.pages&&(o.meta.page=o.meta.pages),o.paginateEvent=i.getTablePrefix("paging"),o.pager=a(n.table).siblings(".datatable-pager"),a(o.pager).hasClass("datatable-paging-loaded")||(a(o.pager).remove(),0!==o.meta.pages&&(i.setDataSourceParam("pagination",{page:o.meta.page,pages:o.meta.pages,perpage:o.meta.perpage,total:o.meta.total}),o.callback=o.serverCallback,"function"==typeof l&&(o.callback=l),o.addPaginateEvent(),o.populate(),o.meta.page=Math.max(o.meta.page||1,o.meta.page),a(n).trigger(o.paginateEvent,o.meta),o.pagingBreakpoint.call(),a(window).resize(o.pagingBreakpoint)))},serverCallback:function(a,t){i.dataRender()},populate:function(){var t=i.getOption("layout.icons.pagination"),e=i.getOption("translate.toolbar.pagination.items.default");o.pager=a("<div/>").addClass("datatable-pager datatable-paging-loaded");var l=a("<ul/>").addClass("datatable-pager-nav mb-5 mb-sm-0");o.pagerLayout.pagination=l,a("<li/>").append(a("<a/>").attr("title",e.first).addClass("datatable-pager-link datatable-pager-link-first").append(a("<i/>").addClass(t.first)).on("click",o.gotoMorePage).attr("data-page",1)).appendTo(l),a("<li/>").append(a("<a/>").attr("title",e.prev).addClass("datatable-pager-link datatable-pager-link-prev").append(a("<i/>").addClass(t.prev)).on("click",o.gotoMorePage)).appendTo(l),a("<li/>").append(a("<a/>").attr("title",e.more).addClass("datatable-pager-link datatable-pager-link-more-prev").html(a("<i/>").addClass(t.more)).on("click",o.gotoMorePage)).appendTo(l),a("<li/>").append(a("<input/>").attr("type","text").addClass("datatable-pager-input form-control").attr("title",e.input).on("keyup",function(){a(this).attr("data-page",Math.abs(a(this).val()))}).on("keypress",function(a){13===a.which&&o.gotoMorePage(a)})).appendTo(l);var d=i.getOption("toolbar.items.pagination.pages.desktop.pagesNumber"),r=Math.ceil(o.meta.page/d)*d,s=r-d;r>o.meta.pages&&(r=o.meta.pages),s<0&&(s=0);for(var c=s;c<(r||1);c++){var p=c+1;a("<li/>").append(a("<a/>").addClass("datatable-pager-link datatable-pager-link-number").text(p).attr("data-page",p).attr("title",p).on("click",o.gotoPage)).appendTo(l)}a("<li/>").append(a("<a/>").attr("title",e.more).addClass("datatable-pager-link datatable-pager-link-more-next").html(a("<i/>").addClass(t.more)).on("click",o.gotoMorePage)).appendTo(l),a("<li/>").append(a("<a/>").attr("title",e.next).addClass("datatable-pager-link datatable-pager-link-next").append(a("<i/>").addClass(t.next)).on("click",o.gotoMorePage)).appendTo(l),a("<li/>").append(a("<a/>").attr("title",e.last).addClass("datatable-pager-link datatable-pager-link-last").append(a("<i/>").addClass(t.last)).on("click",o.gotoMorePage).attr("data-page",o.meta.pages)).appendTo(l),i.getOption("toolbar.items.info")&&(o.pagerLayout.info=a("<div/>").addClass("datatable-pager-info").append(a("<span/>").addClass("datatable-pager-detail"))),a.each(i.getOption("toolbar.layout"),function(t,e){a(o.pagerLayout[e]).appendTo(o.pager)});var u=a("<select/>").addClass("selectpicker datatable-pager-size").attr("title",i.getOption("translate.toolbar.pagination.items.default.select")).attr("data-width","60px").attr("data-container","body").val(o.meta.perpage).on("change",o.updatePerpage).prependTo(o.pagerLayout.info),b=i.getOption("toolbar.items.pagination.pageSizeSelect");0==b.length&&(b=[5,10,20,30,50,100]),a.each(b,function(t,e){var l=e;-1===e&&(l=i.getOption("translate.toolbar.pagination.items.default.all")),a("<option/>").attr("value",e).html(l).appendTo(u)}),a(n).ready(function(){a(".selectpicker").selectpicker().on("hide.bs.select",function(){a(this).closest(".bootstrap-select").removeClass("dropup")}).siblings(".dropdown-toggle").attr("title",i.getOption("translate.toolbar.pagination.items.default.select"))}),o.paste()},paste:function(){a.each(a.unique(i.getOption("toolbar.placement")),function(t,e){"bottom"===e&&a(o.pager).clone(!0).insertAfter(n.table),"top"===e&&a(o.pager).clone(!0).addClass("datatable-pager-top").insertBefore(n.table)})},gotoMorePage:function(t){if(t.preventDefault(),"disabled"===a(this).attr("disabled"))return!1;var e=a(this).attr("data-page");return void 0===e&&(e=a(t.target).attr("data-page")),o.openPage(parseInt(e)),!1},gotoPage:function(t){t.preventDefault(),a(this).hasClass("datatable-pager-link-active")||o.openPage(parseInt(a(this).data("page")))},openPage:function(t){o.meta.page=parseInt(t),a(n).trigger(o.paginateEvent,o.meta),o.callback(o,o.meta),a(o.pager).trigger("datatable-on-goto-page",o.meta)},updatePerpage:function(t){t.preventDefault(),a(this).selectpicker("toggle"),o.pager=a(n.table).siblings(".datatable-pager").removeClass("datatable-paging-loaded"),t.originalEvent&&(o.meta.perpage=parseInt(a(this).val())),a(o.pager).find("select.datatable-pager-size").val(o.meta.perpage).attr("data-selected",o.meta.perpage),i.setDataSourceParam("pagination",{page:o.meta.page,pages:o.meta.pages,perpage:o.meta.perpage,total:o.meta.total}),a(o.pager).trigger("datatable-on-update-perpage",o.meta),a(n).trigger(o.paginateEvent,o.meta),o.callback(o,o.meta),o.updateInfo.call()},addPaginateEvent:function(t){a(n).off(o.paginateEvent).on(o.paginateEvent,function(t,e){i.spinnerCallback(!0),o.pager=a(n.table).siblings(".datatable-pager");var l=a(o.pager).find(".datatable-pager-nav");a(l).find(".datatable-pager-link-active").removeClass("datatable-pager-link-active"),a(l).find('.datatable-pager-link-number[data-page="'+e.page+'"]').addClass("datatable-pager-link-active"),a(l).find(".datatable-pager-link-prev").attr("data-page",Math.max(e.page-1,1)),a(l).find(".datatable-pager-link-next").attr("data-page",Math.min(e.page+1,e.pages)),a(o.pager).each(function(){a(this).find('.datatable-pager-input[type="text"]').prop("value",e.page)}),i.setDataSourceParam("pagination",{page:o.meta.page,pages:o.meta.pages,perpage:o.meta.perpage,total:o.meta.total}),a(o.pager).find("select.datatable-pager-size").val(e.perpage).attr("data-selected",e.perpage),a(n.table).find('.checkbox > [type="checkbox"]').prop("checked",!1),a(n.table).find(".datatable-row-active").removeClass("datatable-row-active"),o.updateInfo.call(),o.pagingBreakpoint.call()})},updateInfo:function(){var t=Math.max(o.meta.perpage*(o.meta.page-1)+1,1),e=Math.min(t+o.meta.perpage-1,o.meta.total);a(o.pager).find(".datatable-pager-info").find(".datatable-pager-detail").html(i.dataPlaceholder(i.getOption("translate.toolbar.pagination.items.info"),{start:0===o.meta.total?0:t,end:-1===o.meta.perpage?o.meta.total:e,pageSize:-1===o.meta.perpage||o.meta.perpage>=o.meta.total?o.meta.total:o.meta.perpage,total:o.meta.total}))},pagingBreakpoint:function(){var t=a(n.table).siblings(".datatable-pager").find(".datatable-pager-nav");if(0!==a(t).length){var l=i.getCurrentPage(),d=a(t).find(".datatable-pager-input").closest("li");a(t).find("li").show(),a.each(i.getOption("toolbar.items.pagination.pages"),function(n,r){if(e.isInResponsiveRange(n)){switch(n){case"desktop":case"tablet":Math.ceil(l/r.pagesNumber),r.pagesNumber,r.pagesNumber;a(d).hide(),o.meta=i.getDataSourceParam("pagination"),o.paginationUpdate();break;case"mobile":a(d).show(),a(t).find(".datatable-pager-link-more-prev").closest("li").hide(),a(t).find(".datatable-pager-link-more-next").closest("li").hide(),a(t).find(".datatable-pager-link-number").closest("li").hide()}return!1}})}},paginationUpdate:function(){var t=a(n.table).siblings(".datatable-pager").find(".datatable-pager-nav"),e=a(t).find(".datatable-pager-link-more-prev"),l=a(t).find(".datatable-pager-link-more-next"),d=a(t).find(".datatable-pager-link-first"),r=a(t).find(".datatable-pager-link-prev"),s=a(t).find(".datatable-pager-link-next"),c=a(t).find(".datatable-pager-link-last"),p=a(t).find(".datatable-pager-link-number"),u=Math.max(a(p).first().data("page")-1,1);a(e).each(function(t,e){a(e).attr("data-page",u)}),1===u?a(e).parent().hide():a(e).parent().show();var b=Math.min(a(p).last().data("page")+1,o.meta.pages);a(l).each(function(t,e){a(l).attr("data-page",b).show()}),b===o.meta.pages&&b===a(p).last().data("page")?a(l).parent().hide():a(l).parent().show(),1===o.meta.page?(a(d).attr("disabled",!0).addClass("datatable-pager-link-disabled"),a(r).attr("disabled",!0).addClass("datatable-pager-link-disabled")):(a(d).removeAttr("disabled").removeClass("datatable-pager-link-disabled"),a(r).removeAttr("disabled").removeClass("datatable-pager-link-disabled")),o.meta.page===o.meta.pages?(a(s).attr("disabled",!0).addClass("datatable-pager-link-disabled"),a(c).attr("disabled",!0).addClass("datatable-pager-link-disabled")):(a(s).removeAttr("disabled").removeClass("datatable-pager-link-disabled"),a(c).removeAttr("disabled").removeClass("datatable-pager-link-disabled"));var g=i.getOption("toolbar.items.pagination.navigation");g.first||a(d).remove(),g.prev||a(r).remove(),g.next||a(s).remove(),g.last||a(c).remove(),g.more||(a(e).remove(),a(l).remove())}};return o.init(t),o},columnHide:function(){var t=e.getViewPort().width;a.each(o.columns,function(l,o){if(void 0!==o.responsive||void 0!==o.visible){var d=o.field,r=a.grep(a(n.table).find(".datatable-cell"),function(t,e){return d===a(t).data("field")});setTimeout(function(){!1===i.getObject("visible",o)?a(r).hide():(e.getBreakpoint(i.getObject("responsive.hidden",o))>=t?a(r).hide():a(r).show(),e.getBreakpoint(i.getObject("responsive.visible",o))<=t?a(r).show():a(r).hide())})}})},setupSubDatatable:function(){var t=i.getOption("detail.content");if("function"==typeof t&&!(a(n.table).find(".datatable-subtable").length>0)){a(n.wrap).addClass("datatable-subtable"),o.columns[0].subtable=!0;var e=function(e){e.preventDefault();var l=a(this).closest(".datatable-row"),d=a(l).next(".datatable-row-subtable");0===a(d).length&&(d=a("<tr/>").addClass("datatable-row-subtable datatable-row-loading").hide().append(a("<td/>").addClass("datatable-subtable").attr("colspan",i.getTotalColumns())),a(l).after(d),a(l).hasClass("datatable-row-even")&&a(d).addClass("datatable-row-subtable-even")),a(d).toggle();var r=a(d).find(".datatable-subtable"),s=a(this).closest("[data-field]:first-child").find(".datatable-toggle-subtable").data("value"),c=a(this).find("i").removeAttr("class");a(l).hasClass("datatable-row-subtable-expanded")?(a(c).addClass(i.getOption("layout.icons.rowDetail.collapse")),a(l).removeClass("datatable-row-subtable-expanded"),a(n).trigger("datatable-on-collapse-subtable",[l])):(a(c).addClass(i.getOption("layout.icons.rowDetail.expand")),a(l).addClass("datatable-row-subtable-expanded"),a(n).trigger("datatable-on-expand-subtable",[l])),0===a(r).find(".datatable").length&&(a.map(n.dataSet,function(a,t){return s===a[o.columns[0].field]&&(e.data=a,!0)}),e.detailCell=r,e.parentRow=l,e.subTable=r,t(e),a(r).children(".datatable").on("datatable-on-init",function(t){a(d).removeClass("datatable-row-loading")}),"local"===i.getOption("data.type")&&a(d).removeClass("datatable-row-loading"))},l=o.columns;a(n.tableBody).find(".datatable-row").each(function(t,o){a(o).find(".datatable-cell").each(function(t,o){var n=a.grep(l,function(t,e){return a(o).data("field")===t.field})[0];if(void 0!==n){var d=a(o).text();if(void 0!==n.subtable&&n.subtable){if(a(o).find(".datatable-toggle-subtable").length>0)return;a(o).html(a("<a/>").addClass("datatable-toggle-subtable").attr("href","#").attr("data-value",d).attr("title",i.getOption("detail.title")).on("click",e).append(a("<i/>").css("width",a(o).data("width")).addClass(i.getOption("layout.icons.rowDetail.collapse"))))}}})})}},dataMapCallback:function(a){var t=a;return"function"==typeof i.getOption("data.source.read.map")?i.getOption("data.source.read.map")(a):(void 0!==a&&void 0!==a.data&&(t=a.data),t)},isSpinning:!1,spinnerCallback:function(a,t){void 0===t&&(t=n);var e=i.getOption("layout.spinner");void 0!==e&&e&&(a?i.isSpinning||(void 0!==e.message&&!0===e.message&&(e.message=i.getOption("translate.records.processing")),i.isSpinning=!0,void 0!==l&&l.block(t,e)):(i.isSpinning=!1,void 0!==l&&l.unblock(t)))},sortCallback:function(t,e,l){var o=l.type||"string",n=l.format||"",i=l.field;return a(t).sort(function(l,d){var r=l[i],s=d[i];switch(o){case"date":if("undefined"==typeof moment)throw new Error("Moment.js is required.");var c=moment(r,n).diff(moment(s,n));return"asc"===e?c>0?1:c<0?-1:0:c<0?1:c>0?-1:0;case"number":return isNaN(parseFloat(r))&&null!=r&&(r=Number(r.replace(/[^0-9\.-]+/g,""))),isNaN(parseFloat(s))&&null!=s&&(s=Number(s.replace(/[^0-9\.-]+/g,""))),r=parseFloat(r),s=parseFloat(s),"asc"===e?r>s?1:r<s?-1:0:r<s?1:r>s?-1:0;case"html":return a(t).sort(function(t,l){return r=a(t[i]).text(),s=a(l[i]).text(),"asc"===e?r>s?1:r<s?-1:0:r<s?1:r>s?-1:0});case"string":default:return"asc"===e?r>s?1:r<s?-1:0:r<s?1:r>s?-1:0}})},log:function(a,t){void 0===t&&(t=""),n.debug&&console.log(a,t)},autoHide:function(){var t=!1,e=a(n.table).find("[data-autohide-enabled]");e.length&&(t=!0,e.hide());var l=function(t){t.preventDefault();var e=a(this).closest(".datatable-row"),l=a(e).next();if(a(l).hasClass("datatable-row-detail"))a(this).find("i").removeClass(i.getOption("layout.icons.rowDetail.expand")).addClass(i.getOption("layout.icons.rowDetail.collapse")),a(l).remove();else{a(this).find("i").removeClass(i.getOption("layout.icons.rowDetail.collapse")).addClass(i.getOption("layout.icons.rowDetail.expand"));var n=a(e).find(".datatable-cell:hidden").clone().show();l=a("<tr/>").addClass("datatable-row-detail").insertAfter(e);var d=a("<td/>").addClass("datatable-detail").attr("colspan",i.getTotalColumns()).appendTo(l),r=a("<table/>");a(n).each(function(){var t=a(this).data("field"),e=a.grep(o.columns,function(a,e){return t===a.field})[0];void 0!==e&&!1===e.visible||a(r).append(a('<tr class="datatable-row"></tr>').append(a('<td class="datatable-cell"></td>').append(a("<span/>").append(e.title))).append(this))}),a(d).append(r)}};setTimeout(function(){a(n.table).find(".datatable-cell").show(),a(n.tableBody).each(function(){for(var e=0;a(this)[0].offsetWidth<a(this)[0].scrollWidth&&e<o.columns.length;)a(n.table).find(".datatable-row").each(function(e){var l=a(this).find(".datatable-cell:not(:hidden):not([data-autohide-disabled])").last();a(l).hide(),t=!0}),e++}),t&&a(n.tableBody).find(".datatable-row").each(function(){0===a(this).find(".datatable-toggle-detail").length&&a(this).prepend(a("<td/>").addClass("datatable-cell datatable-toggle-detail").append(a("<a/>").addClass("datatable-toggle-detail").attr("href","").on("click",l).append('<i class="'+i.getOption("layout.icons.rowDetail.collapse")+'"></i>'))),0===a(n.tableHead).find(".datatable-toggle-detail").length?(a(n.tableHead).find(".datatable-row").first().prepend('<th class="datatable-cell datatable-toggle-detail"><span></span></th>'),a(n.tableFoot).find(".datatable-row").first().prepend('<th class="datatable-cell datatable-toggle-detail"><span></span></th>')):a(n.tableHead).find(".datatable-toggle-detail").find("span")})}),i.adjustCellsWidth.call()},setAutoColumns:function(){i.getOption("data.autoColumns")&&(a.each(n.dataSet[0],function(t,e){0===a.grep(o.columns,function(a,e){return t===a.field}).length&&o.columns.push({field:t,title:t})}),a(n.tableHead).find(".datatable-row").remove(),i.setHeadTitle(),i.getOption("layout.footer")&&(a(n.tableFoot).find(".datatable-row").remove(),i.setHeadTitle(n.tableFoot)))},isLocked:function(){var a=i.lockEnabledColumns();return a.left.length>0||a.right.length>0},isSubtable:function(){return e.hasClass(n.wrap[0],"datatable-subtable")||!1},getExtraSpace:function(t){return parseInt(a(t).css("paddingRight"))+parseInt(a(t).css("paddingLeft"))+(parseInt(a(t).css("marginRight"))+parseInt(a(t).css("marginLeft")))+Math.ceil(a(t).css("border-right-width").replace("px",""))},dataPlaceholder:function(t,e){var l=t;return a.each(e,function(a,t){l=l.replace("{{"+a+"}}",t)}),l},getTableId:function(t){void 0===t&&(t="");var e=a(n).attr("id");return void 0===e&&(e=a(n).attr("class").split(" ")[0]),e+t},getTablePrefix:function(a){return void 0!==a&&(a="-"+a),i.getTableId()+"-"+i.getDepth()+a},getDepth:function(){var t=0,e=n.table;do{e=a(e).parents(".datatable-table"),t++}while(a(e).length>0);return t},stateKeep:function(a,t){a=i.getTablePrefix(a),!1!==i.getOption("data.saveState")&&localStorage&&localStorage.setItem(a,JSON.stringify(t))},stateGet:function(a,t){if(a=i.getTablePrefix(a),!1!==i.getOption("data.saveState")){var e=null;return localStorage&&(e=localStorage.getItem(a)),null!=e?JSON.parse(e):void 0}},stateUpdate:function(t,e){var l=i.stateGet(t);null==l&&(l={}),i.stateKeep(t,a.extend({},l,e))},stateRemove:function(a){a=i.getTablePrefix(a),localStorage&&localStorage.removeItem(a)},getTotalColumns:function(t){return void 0===t&&(t=n.tableBody),a(t).find(".datatable-row").first().find(".datatable-cell").length},getOneRow:function(t,e,l){void 0===l&&(l=!0);var o=a(t).find(".datatable-row:not(.datatable-row-detail):nth-child("+e+")");return l&&(o=o.find(".datatable-cell")),o},sortColumn:function(t,e,l){void 0===e&&(e="asc"),void 0===l&&(l=!1);var o=a(t).index(),i=a(n.tableBody).find(".datatable-row"),d=a(t).closest(".datatable-lock").index();-1!==d&&(i=a(n.tableBody).find(".datatable-lock:nth-child("+(d+1)+")").find(".datatable-row"));var r=a(i).parent();a(i).sort(function(t,n){var i=a(t).find("td:nth-child("+o+")").text(),d=a(n).find("td:nth-child("+o+")").text();return l&&(i=parseInt(i),d=parseInt(d)),"asc"===e?i>d?1:i<d?-1:0:i<d?1:i>d?-1:0}).appendTo(r)},sorting:function(){var t={init:function(){o.sortable&&(a(n.tableHead).find(".datatable-cell:not(.datatable-cell-check)").addClass("datatable-cell-sort").off("click").on("click",t.sortClick),t.setIcon())},setIcon:function(){var t=i.getDataSourceParam("sort");if(!a.isEmptyObject(t)){var e=i.getColumnByField(t.field);if(void 0!==e&&!(void 0!==e.sortable&&!1===e.sortable||void 0!==e.selector&&!0===e.selector)){var l=a(n.tableHead).find('.datatable-cell[data-field="'+t.field+'"]').attr("data-sort",t.sort),o=a(l).find("span"),d=a(o).find("i"),r=i.getOption("layout.icons.sort");a(d).length>0?a(d).removeAttr("class").addClass(r[t.sort]):a(o).append(a("<i/>").addClass(r[t.sort])),a(l).addClass("datatable-cell-sorted")}}},sortClick:function(l){var d=i.getDataSourceParam("sort"),r=a(this).data("field"),s=i.getColumnByField(r);if(void 0!==s&&(void 0===s.sortable||!1!==s.sortable)&&(void 0===s.selector||!0!==s.selector)&&(a(n.tableHead).find("th").removeClass("datatable-cell-sorted"),e.addClass(this,"datatable-cell-sorted"),a(n.tableHead).find(".datatable-cell > span > i").remove(),o.sortable)){i.spinnerCallback(!0);var c="desc";i.getObject("field",d)===r&&(c=i.getObject("sort",d)),d={field:r,sort:c=void 0===c||"desc"===c?"asc":"desc"},i.setDataSourceParam("sort",d),t.setIcon(),setTimeout(function(){i.dataRender("sort"),a(n).trigger("datatable-on-sort",d)},300)}}};t.init()},localDataUpdate:function(){var t=i.getDataSourceParam();void 0===n.originalDataSet&&(n.originalDataSet=n.dataSet);var e=i.getObject("sort.field",t),l=i.getObject("sort.sort",t),o=i.getColumnByField(e);if(void 0!==o&&!0!==i.getOption("data.serverSorting")?"function"==typeof o.sortCallback?n.dataSet=o.sortCallback(n.originalDataSet,l,o):n.dataSet=i.sortCallback(n.originalDataSet,l,o):n.dataSet=n.originalDataSet,"object"==typeof t.query&&!i.getOption("data.serverFiltering")){t.query=t.query||{};var d=function(a){for(var t in a)if(a.hasOwnProperty(t))if("string"==typeof a[t]){if(a[t].toLowerCase()==r||-1!==a[t].toLowerCase().indexOf(r))return!0}else if("number"==typeof a[t]){if(a[t]===r)return!0}else if("object"==typeof a[t]&&d(a[t]))return!0;return!1},r=a(i.getOption("search.input")).val();void 0!==r&&""!==r&&(r=r.toLowerCase(),n.dataSet=a.grep(n.dataSet,d),delete t.query[i.getGeneralSearchKey()]),a.each(t.query,function(a,e){""===e&&delete t.query[a]}),n.dataSet=i.filterArray(n.dataSet,t.query),n.dataSet=n.dataSet.filter(function(){return!0})}return n.dataSet},filterArray:function(t,e,l){if("object"!=typeof t)return[];if(void 0===l&&(l="AND"),"object"!=typeof e)return t;if(l=l.toUpperCase(),-1===a.inArray(l,["AND","OR","NOT"]))return[];var o=Object.keys(e).length,n=[];return a.each(t,function(t,d){var r=d,s=0;a.each(e,function(a,t){t=t instanceof Array?t:[t];var e=i.getObject(a,r);if(void 0!==e&&e){var l=e.toString().toLowerCase();t.forEach(function(a,t){a.toString().toLowerCase()!=l&&-1===l.indexOf(a.toString().toLowerCase())||s++})}}),("AND"==l&&s==o||"OR"==l&&s>0||"NOT"==l&&0==s)&&(n[t]=d)}),t=n},resetScroll:function(){void 0===o.detail&&1===i.getDepth()&&(a(n.table).find(".datatable-row").css("left",0),a(n.table).find(".datatable-lock").css("top",0),a(n.tableBody).scrollTop(0))},getColumnByField:function(t){var e;if(void 0!==t)return a.each(o.columns,function(a,l){if(t===l.field)return e=l,!1}),e},getDefaultSortColumn:function(){var t;return a.each(o.columns,function(e,l){if(void 0!==l.sortable&&-1!==a.inArray(l.sortable,["asc","desc"]))return t={sort:l.sortable,field:l.field},!1}),t},getHiddenDimensions:function(t,e){var l={position:"absolute",visibility:"hidden",display:"block"},o={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=a(t).parents().addBack().not(":visible");e="boolean"==typeof e&&e;var i=[];return n.each(function(){var a={};for(var t in l)a[t]=this.style[t],this.style[t]=l[t];i.push(a)}),o.width=a(t).width(),o.outerWidth=a(t).outerWidth(e),o.innerWidth=a(t).innerWidth(),o.height=a(t).height(),o.innerHeight=a(t).innerHeight(),o.outerHeight=a(t).outerHeight(e),n.each(function(a){var t=i[a];for(var e in l)this.style[e]=t[e]}),o},getGeneralSearchKey:function(){var t=a(i.getOption("search.input"));return i.getOption("search.key")||a(t).prop("name")},getObject:function(a,t){return a.split(".").reduce(function(a,t){return null!==a&&void 0!==a[t]?a[t]:null},t)},extendObj:function(a,t,e){var l=t.split("."),o=0;return function a(t){var n=l[o++];void 0!==t[n]&&null!==t[n]?"object"!=typeof t[n]&&"function"!=typeof t[n]&&(t[n]={}):t[n]={},o===l.length?t[n]=e:a(t[n])}(a),a},rowEvenOdd:function(){a(n.tableBody).find(".datatable-row").removeClass("datatable-row-even"),a(n.wrap).hasClass("datatable-subtable")?a(n.tableBody).find(".datatable-row:not(.datatable-row-detail):even").addClass("datatable-row-even"):a(n.tableBody).find(".datatable-row:nth-child(even)").addClass("datatable-row-even")},timer:0,redraw:function(){return i.adjustCellsWidth.call(),i.isLocked()&&(i.scrollbar(),i.resetScroll(),i.adjustCellsHeight.call()),i.adjustLockContainer.call(),i.initHeight.call(),n},load:function(){return i.reload(),n},reload:function(){return function(a,t){clearTimeout(i.timer),i.timer=setTimeout(a,t)}(function(){o.data.serverFiltering||i.localDataUpdate(),i.dataRender(),a(n).trigger("datatable-on-reloaded")},i.getOption("search.delay")),n},getRecord:function(t){return void 0===n.tableBody&&(n.tableBody=a(n.table).children("tbody")),a(n.tableBody).find(".datatable-cell:first-child").each(function(e,l){if(t==a(l).text()){var o=a(l).closest(".datatable-row").index()+1;return n.API.record=n.API.value=i.getOneRow(n.tableBody,o),n}}),n},getColumn:function(t){return i.setSelectedRecords(),n.API.value=a(n.API.record).find('[data-field="'+t+'"]'),n},destroy:function(){a(n).parent().find(".datatable-pager").remove();var t=a(n.initialDatatable).addClass("datatable-destroyed").show();return a(n).replaceWith(t),a(n=t).trigger("datatable-on-destroy"),i.isInit=!1,t=null},sort:function(t,e){e=void 0===e?"asc":e,i.spinnerCallback(!0);var l={field:t,sort:e};return i.setDataSourceParam("sort",l),setTimeout(function(){i.dataRender("sort"),a(n).trigger("datatable-on-sort",l),a(n.tableHead).find(".datatable-cell > span > i").remove()},300),n},getValue:function(){return a(n.API.value).text()},setActive:function(t){"string"==typeof t&&(t=a(n.tableBody).find('.checkbox-single > [type="checkbox"][value="'+t+'"]')),a(t).prop("checked",!0);var e=[];a(t).each(function(t,l){a(l).closest("tr").addClass("datatable-row-active");var o=a(l).attr("value");void 0!==o&&e.push(o)}),a(n).trigger("datatable-on-check",[e])},setInactive:function(t){"string"==typeof t&&(t=a(n.tableBody).find('.checkbox-single > [type="checkbox"][value="'+t+'"]')),a(t).prop("checked",!1);var e=[];a(t).each(function(t,l){a(l).closest("tr").removeClass("datatable-row-active");var o=a(l).attr("value");void 0!==o&&e.push(o)}),a(n).trigger("datatable-on-uncheck",[e])},setActiveAll:function(t){var e=a(n.table).find("> tbody, > thead").find("tr").not(".datatable-row-subtable").find('.datatable-cell-check [type="checkbox"]');t?i.setActive(e):i.setInactive(e)},setSelectedRecords:function(){return n.API.record=a(n.tableBody).find(".datatable-row-active"),n},getSelectedRecords:function(){return i.setSelectedRecords(),n.API.record=n.rows(".datatable-row-active").nodes(),n.API.record},getOption:function(a){return i.getObject(a,o)},setOption:function(a,t){o=i.extendObj(o,a,t)},search:function(t,e){void 0!==e&&(e=a.makeArray(e)),l=function(){var l=i.getDataSourceQuery();if(void 0===e&&void 0!==t){var d=i.getGeneralSearchKey();l[d]=t}"object"==typeof e&&(a.each(e,function(a,e){l[e]=t}),a.each(l,function(t,e){(""===e||a.isEmptyObject(e))&&delete l[t]})),i.setDataSourceQuery(l),n.setDataSourceParam("pagination",Object.assign({},n.getDataSourceParam("pagination"),{page:1})),o.data.serverFiltering||i.localDataUpdate(),i.dataRender("search")},d=i.getOption("search.delay"),clearTimeout(i.timer),i.timer=setTimeout(l,d);var l,d},setDataSourceParam:function(t,e){n.API.params=a.extend({},{pagination:{page:1,perpage:i.getOption("data.pageSize")},sort:i.getDefaultSortColumn(),query:{}},n.API.params,i.stateGet(i.stateId)),n.API.params=i.extendObj(n.API.params,t,e),i.stateKeep(i.stateId,n.API.params)},getDataSourceParam:function(t){return n.API.params=a.extend({},{pagination:{page:1,perpage:i.getOption("data.pageSize")},sort:i.getDefaultSortColumn(),query:{}},n.API.params,i.stateGet(i.stateId)),"string"==typeof t?i.getObject(t,n.API.params):n.API.params},getDataSourceQuery:function(){return i.getDataSourceParam("query")||{}},setDataSourceQuery:function(a){i.setDataSourceParam("query",a)},getCurrentPage:function(){return a(n.table).siblings(".datatable-pager").last().find(".datatable-pager-nav").find(".datatable-pager-link.datatable-pager-link-active").data("page")||1},getPageSize:function(){return a(n.table).siblings(".datatable-pager").last().find("select.datatable-pager-size").val()||10},getTotalRows:function(){return n.API.params.pagination.total},getDataSet:function(){return n.originalDataSet},nodeTr:[],nodeTd:[],nodeCols:[],recentNode:[],table:function(){if(void 0!==n.table)return n.table},row:function(t){return i.rows(t),i.nodeTr=i.recentNode=a(i.nodeTr).first(),n},rows:function(t){return i.isLocked()?i.nodeTr=i.recentNode=a(n.tableBody).find(t).filter(".datatable-lock-scroll > .datatable-row"):i.nodeTr=i.recentNode=a(n.tableBody).find(t).filter(".datatable-row"),n},column:function(t){return i.nodeCols=i.recentNode=a(n.tableBody).find(".datatable-cell:nth-child("+(t+1)+")"),n},columns:function(t){var e=n.table;i.nodeTr===i.recentNode&&(e=i.nodeTr);var l=a(e).find('.datatable-cell[data-field="'+t+'"]');return l.length>0?i.nodeCols=i.recentNode=l:i.nodeCols=i.recentNode=a(e).find(t).filter(".datatable-cell"),n},cell:function(t){return i.cells(t),i.nodeTd=i.recentNode=a(i.nodeTd).first(),n},cells:function(t){var e=a(n.tableBody).find(".datatable-cell");return void 0!==t&&(e=a(e).filter(t)),i.nodeTd=i.recentNode=e,n},remove:function(){return a(i.nodeTr.length)&&i.nodeTr===i.recentNode&&a(i.nodeTr).remove(),i.layoutUpdate(),n},visible:function(t){if(a(i.recentNode.length)){var e=i.lockEnabledColumns();if(i.recentNode===i.nodeCols){var l=i.recentNode.index();if(i.isLocked()){var n=a(i.recentNode).closest(".datatable-lock-scroll").length;n?l+=e.left.length+1:a(i.recentNode).closest(".datatable-lock-right").length&&(l+=e.left.length+n+1)}}t?(i.recentNode===i.nodeCols&&delete o.columns[l].visible,a(i.recentNode).show()):(i.recentNode===i.nodeCols&&i.setOption("columns."+l+".visible",!1),a(i.recentNode).hide()),i.columnHide(),i.redraw()}},nodes:function(){return i.recentNode},dataset:function(){return n},gotoPage:function(a){void 0!==i.pagingObject&&(i.isInit=!0,i.pagingObject.openPage(a))}};if(a.each(i,function(a,t){n[a]=t}),void 0!==o)if("string"==typeof o){var d=o;void 0!==(n=a(this).data(t))&&(o=n.options,i[d].apply(this,Array.prototype.slice.call(arguments,1)))}else n.data(t)||a(this).hasClass("datatable-loaded")||(n.dataSet=null,n.textAlign={left:"datatable-cell-left",center:"datatable-cell-center",right:"datatable-cell-right"},o=a.extend(!0,{},a.fn.KTDatatable.defaults,o),n.options=o,i.init.apply(this,[o]),a(n.wrap).data(t,n));else void 0===(n=a(this).data(t))&&a.error("KTDatatable not initialized"),o=n.options;return n}console.warn("No KTDatatable element exist.")},a.fn.KTDatatable.defaults={data:{type:"local",source:null,pageSize:10,saveState:!0,serverPaging:!1,serverFiltering:!1,serverSorting:!1,autoColumns:!1,attr:{rowProps:[]}},layout:{theme:"default",class:"datatable-primary",scroll:!1,height:null,minHeight:null,footer:!1,header:!0,customScrollbar:!0,spinner:{overlayColor:"#000000",opacity:0,type:"loader",state:"primary",message:!0},icons:{sort:{asc:"flaticon2-arrow-up",desc:"flaticon2-arrow-down"},pagination:{next:"flaticon2-next",prev:"flaticon2-back",first:"flaticon2-fast-back",last:"flaticon2-fast-next",more:"flaticon-more-1"},rowDetail:{expand:"fa fa-caret-down",collapse:"fa fa-caret-right"}}},sortable:!0,resizable:!1,filterable:!1,pagination:!0,editable:!1,columns:[],search:{onEnter:!1,input:null,delay:400,key:null},rows:{callback:function(){},beforeTemplate:function(){},afterTemplate:function(){},autoHide:!0},toolbar:{layout:["pagination","info"],placement:["bottom"],items:{pagination:{type:"default",pages:{desktop:{layout:"default",pagesNumber:5},tablet:{layout:"default",pagesNumber:3},mobile:{layout:"compact"}},navigation:{prev:!0,next:!0,first:!0,last:!0,more:!1},pageSizeSelect:[]},info:!0}},translate:{records:{processing:"Please wait...",noRecords:"No records found"},toolbar:{pagination:{items:{default:{first:"First",prev:"Previous",next:"Next",last:"Last",more:"More pages",input:"Page number",select:"Select page size",all:"all"},info:"Showing {{start}} - {{end}} of {{total}}"}}}},extensions:{}}}(jQuery);